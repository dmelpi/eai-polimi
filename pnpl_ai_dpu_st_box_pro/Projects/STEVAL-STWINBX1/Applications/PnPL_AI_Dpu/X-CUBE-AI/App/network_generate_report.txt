Neural Network Tools for STM32AI v1.6.0 (STM.ai v7.2.0-RC5)
Created date          : 2022-10-11 17:42:42
Parameters            : generate --name network -m C:/Users/andre/QuasarEthz/audio/models/20221010_15.34.39/model.tflite --type tflite --compression none --verbosity 1 --workspace C:\Users\andre\AppData\Local\Temp\mxAI_workspace35342206774810012486124429364478728 --output C:\Users\andre\.stm32cubemx\network_output --allocate-inputs --allocate-outputs

Exec/report summary (generate)
------------------------------------------------------------------------------------------------------------------------
model file            : C:\Users\andre\QuasarEthz\audio\models\20221010_15.34.39\model.tflite
type                  : tflite
c_name                : network
compression           : none
allocator strategy    : ['allocate-inputs', 'allocate-outputs']
workspace dir         : C:\Users\andre\AppData\Local\Temp\mxAI_workspace35342206774810012486124429364478728
output dir            : C:\Users\andre\.stm32cubemx\network_output
model_name            : model
model_hash            : 515d552da208ec781731ac99b2849a83
input 1/1             : 'serving_default_input0'
                        1860 items, 7.27 KiB, ai_float, float, (1,155,1,12), domain:activations/**default**
output 1/1            : 'nl_21'
                        1 items, 4 B, ai_float, float, (1,1,1,1), domain:activations/**default**
params #              : 841 items (3.29 KiB)
macc                  : 282,827
weights (ro)          : 3,364 B (3.29 KiB) (1 segment)
activations (rw)      : 22,128 B (21.61 KiB) (1 segment) *
ram (total)           : 22,128 B (21.61 KiB) = 22,128 + 0 + 0

(*) input/output buffers can be used from the activations buffer

Model name - model ['serving_default_input0'] ['nl_21']
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
id   layer (type,original)                                       oshape                 param/size   macc      connected to                                |   c_size         c_macc            c_type        
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
0    serving_default_input0 (Input, )                            [b:1,h:155,c:12]                                                                          |                                   
     model_batch_normalization_batchnorm_mul (Placeholder, )     [b:None,c:12]          12/48                                                              |   -48(-100.0%)                    
     eltwise_0 (Eltwise, MUL)                                    [b:1,h:155,c:12]                    1,860     serving_default_input0                      |                  -1,860(-100.0%)  
                                                                                                               model_batch_normalization_batchnorm_mul     |  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1    model_batch_normalization_batchnorm_sub (Placeholder, )     [b:None,c:12]          12/48                                                              |   +48(+100.0%)   +3,720(+100.0%)   bn_of32[0]    
     eltwise_1 (Eltwise, ADD)                                    [b:1,h:155,c:12]                    1,860     eltwise_0                                   |                  -1,860(-100.0%)  
                                                                                                               model_batch_normalization_batchnorm_sub     |  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
2    reshape_2 (Reshape, EXPAND_DIMS)                            [b:1,h:1,w:155,c:12]                          eltwise_1                                   |                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
3    conv2d_3 (Conv2D, CONV_2D)                                  [b:1,h:1,w:153,c:24]   240/960      132,216   reshape_2                                   |                  +3,672(+2.8%)     conv2d_of32[1]
     nl_3_nl (Nonlinearity, CONV_2D)                             [b:1,h:1,w:153,c:24]                3,672     conv2d_3                                    |                  -3,672(-100.0%)  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
4    reshape_4 (Reshape, RESHAPE)                                [b:1,h:153,c:24]                              nl_3_nl                                     |                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
5    reshape_5 (Reshape, EXPAND_DIMS)                            [b:1,h:153,w:1,c:24]                          reshape_4                                   |                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
6    pool_6 (Pool, MAX_POOL_2D)                                  [b:1,h:76,w:1,c:24]                 3,648     reshape_5                                   |                                    pool_of32[2]  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
7    model_batch_normalization_1_batchnorm_mul (Placeholder, )   [b:None,c:24]          24/96                                                              |   -96(-100.0%)                    
     eltwise_7 (Eltwise, MUL)                                    [b:1,h:76,w:1,c:24]                 1,824     pool_6                                      |                  -1,824(-100.0%)  
                                                                                                               model_batch_normalization_1_batchnorm_mul   |  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
8    model_batch_normalization_1_batchnorm_sub (Placeholder, )   [b:None,c:24]          24/96                                                              |   +96(+100.0%)   +3,648(+100.0%)   bn_of32[3]    
     eltwise_8 (Eltwise, ADD)                                    [b:1,h:76,w:1,c:24]                 1,824     eltwise_7                                   |                  -1,824(-100.0%)  
                                                                                                               model_batch_normalization_1_batchnorm_sub   |  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
9    reshape_9 (Reshape, RESHAPE)                                [b:1,h:76,c:24]                               eltwise_8                                   |                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
10   reshape_10 (Reshape, EXPAND_DIMS)                           [b:1,h:1,w:76,c:24]                           reshape_9                                   |                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
11   conv2d_11 (Conv2D, CONV_2D)                                 [b:1,h:1,w:74,c:24]    456/1,824    127,896   reshape_10                                  |                  +1,776(+1.4%)     conv2d_of32[4]
     nl_11_nl (Nonlinearity, CONV_2D)                            [b:1,h:1,w:74,c:24]                 1,776     conv2d_11                                   |                  -1,776(-100.0%)  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
12   model_batch_normalization_2_batchnorm_mul (Placeholder, )   [b:None,c:24]          24/96                                                              |   -96(-100.0%)                    
     eltwise_12 (Eltwise, MUL)                                   [b:1,h:1,w:74,c:24]                 1,776     nl_11_nl                                    |                  -1,776(-100.0%)  
                                                                                                               model_batch_normalization_2_batchnorm_mul   |  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
13   model_batch_normalization_2_batchnorm_sub (Placeholder, )   [b:None,c:24]          24/96                                                              |   +96(+100.0%)   +3,552(+100.0%)   bn_of32[5]    
     eltwise_13 (Eltwise, ADD)                                   [b:1,h:1,w:74,c:24]                 1,776     eltwise_12                                  |                  -1,776(-100.0%)  
                                                                                                               model_batch_normalization_2_batchnorm_sub   |  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
14   reshape_14 (Reshape, RESHAPE)                               [b:1,h:74,c:24]                               eltwise_13                                  |                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
15   reshape_15 (Reshape, EXPAND_DIMS)                           [b:1,h:74,w:1,c:24]                           reshape_14                                  |                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
16   pool_16 (Pool, MAX_POOL_2D)                                 [b:1,h:37,w:1,c:24]                 1,776     reshape_15                                  |                                    pool_of32[6]  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
17   reshape_17 (Reshape, RESHAPE)                               [b:1,h:37,c:24]                               pool_16                                     |                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
18   pool_18 (Pool, MEAN)                                        [b:1,h:1,c:24]                      888       reshape_17                                  |                                    pool_of32[7]  
     reshape_18_reshape (Reshape, MEAN)                          [b:1,c:24]                                    pool_18                                     |                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
19   reshape_19 (Reshape, RESHAPE)                               [b:1,c:24]                                    reshape_18_reshape                          |                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
20   dense_20 (Dense, FULLY_CONNECTED)                           [b:1,c:1]              25/100       25        reshape_19                                  |                                    dense_of32[8] 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
21   nl_21 (Nonlinearity, LOGISTIC)                              [b:1,c:1]                           10        dense_20                                    |                                    nl_of32[o][9] 
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
model/c-model: macc=282,827/282,827  weights=3,364/3,364  activations=--/22,128 io=--/0



Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name            : model
c-name                : network
c-node #              : 10
c-array #             : 23
activations size      : 22128 (1 segments)
weights size          : 3364 (1 segments)
macc                  : 282827
inputs                : ['serving_default_input0_output']
outputs               : ['nl_21_output']

C-Arrays (23)
------------------------------------------------------------------------------------------------------------
c_id   name (*_array)                  item/size    domain/mem-pool           c-type        fmt     comment
------------------------------------------------------------------------------------------------------------
0      serving_default_input0_output   1860/7440    activations/**default**   float         float   /input 
1      eltwise_1_output                1860/7440    activations/**default**   float         float          
2      conv2d_3_output                 3672/14688   activations/**default**   float         float          
3      pool_6_output                   1824/7296    activations/**default**   float         float          
4      eltwise_8_output                1824/7296    activations/**default**   float         float          
5      conv2d_11_output                1776/7104    activations/**default**   float         float          
6      eltwise_13_output               1776/7104    activations/**default**   float         float          
7      pool_16_output                  888/3552     activations/**default**   float         float          
8      pool_18_output                  24/96        activations/**default**   float         float          
9      dense_20_output                 1/4          activations/**default**   float         float          
10     nl_21_output                    1/4          activations/**default**   float         float   /output
11     eltwise_1_scale                 12/48        weights/weights           const float   float          
12     eltwise_1_bias                  12/48        weights/weights           const float   float          
13     conv2d_3_weights                216/864      weights/weights           const float   float          
14     conv2d_3_bias                   24/96        weights/weights           const float   float          
15     eltwise_8_scale                 24/96        weights/weights           const float   float          
16     eltwise_8_bias                  24/96        weights/weights           const float   float          
17     conv2d_11_weights               432/1728     weights/weights           const float   float          
18     conv2d_11_bias                  24/96        weights/weights           const float   float          
19     eltwise_13_scale                24/96        weights/weights           const float   float          
20     eltwise_13_bias                 24/96        weights/weights           const float   float          
21     dense_20_weights                24/96        weights/weights           const float   float          
22     dense_20_bias                   1/4          weights/weights           const float   float          
------------------------------------------------------------------------------------------------------------

C-Layers (10)
--------------------------------------------------------------------------------------------------------------
c_id   name (*_layer)   id   layer_type   macc     rom    tensors                            shape (array id)
--------------------------------------------------------------------------------------------------------------
0      eltwise_1        1    bn           3720     96     I: serving_default_input0_output   (1,155,1,12) (0)
                                                          W: eltwise_1_scale                 (1,1,1,12) (11) 
                                                          W: eltwise_1_bias                  (1,1,1,12) (12) 
                                                          O: eltwise_1_output                (1,155,1,12) (1)
--------------------------------------------------------------------------------------------------------------
1      conv2d_3         3    conv2d       135888   960    I: eltwise_1_output0               (1,1,155,12) (1)
                                                          W: conv2d_3_weights                (3,24,1,3) (13) 
                                                          W: conv2d_3_bias                   (1,1,1,24) (14) 
                                                          O: conv2d_3_output                 (1,1,153,24) (2)
--------------------------------------------------------------------------------------------------------------
2      pool_6           6    pool         3648     0      I: conv2d_3_output0                (1,153,1,24) (2)
                                                          O: pool_6_output                   (1,76,1,24) (3) 
--------------------------------------------------------------------------------------------------------------
3      eltwise_8        8    bn           3648     192    I: pool_6_output                   (1,76,1,24) (3) 
                                                          W: eltwise_8_scale                 (1,1,1,24) (15) 
                                                          W: eltwise_8_bias                  (1,1,1,24) (16) 
                                                          O: eltwise_8_output                (1,76,1,24) (4) 
--------------------------------------------------------------------------------------------------------------
4      conv2d_11        11   conv2d       129672   1824   I: eltwise_8_output0               (1,1,76,24) (4) 
                                                          W: conv2d_11_weights               (6,24,1,3) (17) 
                                                          W: conv2d_11_bias                  (1,1,1,24) (18) 
                                                          O: conv2d_11_output                (1,1,74,24) (5) 
--------------------------------------------------------------------------------------------------------------
5      eltwise_13       13   bn           3552     192    I: conv2d_11_output                (1,1,74,24) (5) 
                                                          W: eltwise_13_scale                (1,1,1,24) (19) 
                                                          W: eltwise_13_bias                 (1,1,1,24) (20) 
                                                          O: eltwise_13_output               (1,1,74,24) (6) 
--------------------------------------------------------------------------------------------------------------
6      pool_16          16   pool         1776     0      I: eltwise_13_output0              (1,74,1,24) (6) 
                                                          O: pool_16_output                  (1,37,1,24) (7) 
--------------------------------------------------------------------------------------------------------------
7      pool_18          18   pool         888      0      I: pool_16_output                  (1,37,1,24) (7) 
                                                          O: pool_18_output                  (1,1,1,24) (8)  
--------------------------------------------------------------------------------------------------------------
8      dense_20         20   dense        25       100    I: pool_18_output                  (1,1,1,24) (8)  
                                                          W: dense_20_weights                (24,1,1,1) (21) 
                                                          W: dense_20_bias                   (1,1,1,1) (22)  
                                                          O: dense_20_output                 (1,1,1,1) (9)   
--------------------------------------------------------------------------------------------------------------
9      nl_21            21   nl           10       0      I: dense_20_output                 (1,1,1,1) (9)   
                                                          O: nl_21_output                    (1,1,1,1) (10)  
--------------------------------------------------------------------------------------------------------------



Number of operations per c-layer
---------------------------------------------------------------------------------------------
c_id    m_id   name (type)          #op (type)                       #param (sparsity)      
---------------------------------------------------------------------------------------------
0       1      eltwise_1 (bn)                 3,720 (smul_f32_f32)               24 (0.0000)
1       3      conv2d_3 (conv2d)            135,888 (smul_f32_f32)              240 (0.0000)
2       6      pool_6 (pool)                  3,648 (op_f32_f32)                            
3       8      eltwise_8 (bn)                 3,648 (smul_f32_f32)               48 (0.0000)
4       11     conv2d_11 (conv2d)           129,672 (smul_f32_f32)              456 (0.0000)
5       13     eltwise_13 (bn)                3,552 (smul_f32_f32)               48 (0.0000)
6       16     pool_16 (pool)                 1,776 (op_f32_f32)                            
7       18     pool_18 (pool)                   888 (op_f32_f32)                            
8       20     dense_20 (dense)                  25 (smul_f32_f32)               25 (0.0000)
9       21     nl_21 (nl)                        10 (op_f32_f32)                            
---------------------------------------------------------------------------------------------
total                                       282,827                             841 (0.0000)

  Number of operation types
  ---------------------------------------------
  smul_f32_f32             276,505       97.8%
  op_f32_f32                 6,322        2.2%

Complexity report (model)
------------------------------------------------------------------------------------------------------------
m_id   name                                        c_macc                    c_rom                     c_id
------------------------------------------------------------------------------------------------------------
1      model_batch_normalization_batchnorm_sub     |                  1.3%   |                  2.9%   [0] 
3      conv2d_3                                    ||||||||||||||||  48.0%   ||||||||          28.5%   [1] 
6      pool_6                                      |                  1.3%   |                  0.0%   [2] 
8      model_batch_normalization_1_batchnorm_sub   |                  1.3%   ||                 5.7%   [3] 
11     conv2d_11                                   |||||||||||||||   45.8%   ||||||||||||||||  54.2%   [4] 
13     model_batch_normalization_2_batchnorm_sub   |                  1.3%   ||                 5.7%   [5] 
16     pool_16                                     |                  0.6%   |                  0.0%   [6] 
18     pool_18                                     |                  0.3%   |                  0.0%   [7] 
20     dense_20                                    |                  0.0%   |                  3.0%   [8] 
21     nl_21                                       |                  0.0%   |                  0.0%   [9] 
------------------------------------------------------------------------------------------------------------
macc=282,827 weights=3,364 act=22,128 ram_io=0

Generated files (7)
--------------------------------------------------------------------------
C:\Users\andre\.stm32cubemx\network_output\network_config.h
C:\Users\andre\.stm32cubemx\network_output\network.h
C:\Users\andre\.stm32cubemx\network_output\network.c
C:\Users\andre\.stm32cubemx\network_output\network_data_params.h
C:\Users\andre\.stm32cubemx\network_output\network_data_params.c
C:\Users\andre\.stm32cubemx\network_output\network_data.h
C:\Users\andre\.stm32cubemx\network_output\network_data.c
